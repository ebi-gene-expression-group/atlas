{"version":3,"sources":["webpack:///./atlas_bundles/bioentity-information/index.js","webpack:///./atlas_bundles/bioentity-information/node_modules/sc-atlas-bioentity-information/lib/index.js","webpack:///./atlas_bundles/bioentity-information/node_modules/sc-atlas-bioentity-information/lib/BioentityInformation.js","webpack:///./atlas_bundles/bioentity-information/node_modules/sc-atlas-bioentity-information/lib/BioentityProperty.js","webpack:///./atlas_bundles/bioentity-information/node_modules/sc-atlas-bioentity-information/lib/Loading.js","webpack:///./atlas_bundles/bioentity-information/node_modules/sc-atlas-bioentity-information/lib/images/loading.gif"],"names":["render"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;;QAEQA,M,GAAAA,mC;;;;;;;;;;;;;ACFR;;AAEA;AACA;AACA,CAAC;AACD;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,sCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA;AACA;;AAEA;AACA,wB;;;;;;;;;;;;;AC1BA;;AAEA;AACA;AACA,CAAC;;AAED,gCAAgC,2CAA2C,gBAAgB,kBAAkB,OAAO,2BAA2B,wDAAwD,gCAAgC,uDAAuD,2DAA2D,EAAE,EAAE,yDAAyD,qEAAqE,6DAA6D,oBAAoB,GAAG,EAAE;;AAEjjB;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,sCAAsC,uCAAuC,gBAAgB;;AAE7F,iDAAiD,0CAA0C,0DAA0D,EAAE;;AAEvJ,iDAAiD,aAAa,uFAAuF,EAAE,uFAAuF;;AAE9O,0CAA0C,+DAA+D,qGAAqG,EAAE,yEAAyE,eAAe,yEAAyE,EAAE,EAAE,uHAAuH;;AAE5e,gCAAgC,qBAAqB,qCAAqC,gDAAgD,0BAA0B,MAAM,0BAA0B,wBAAwB,EAAE,gBAAgB,eAAe,QAAQ,EAAE,iBAAiB,gBAAgB,EAAE,OAAO,sDAAsD,qBAAqB,EAAE,kBAAkB,oBAAoB,EAAE,EAAE,EAAE,EAAE,qBAAqB,EAAE,EAAE,GAAG;;AAExc;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,WAAW,qBAAqB;AAChC;AACA;AACA,aAAa,SAAS,uBAAuB,EAAE;AAC/C;AACA;AACA;AACA;AACA;AACA,wEAAwE,+CAA+C;AACvH;AACA;AACA,OAAO;;AAEP;AACA;AACA,SAAS,yCAAyC;AAClD,0DAA0D,qEAAqE;AAC/H;AACA;AACA,WAAW,qBAAqB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,uC;;;;;;;;;;;;;AC1LA;;AAEA;AACA;AACA,CAAC;;AAED,gCAAgC,2CAA2C,gBAAgB,kBAAkB,OAAO,2BAA2B,wDAAwD,gCAAgC,uDAAuD,2DAA2D,EAAE,EAAE,yDAAyD,qEAAqE,6DAA6D,oBAAoB,GAAG,EAAE;;AAEjjB;;AAEA;;AAEA;;AAEA;;AAEA,sCAAsC,uCAAuC,gBAAgB;;AAE7F,iDAAiD,0CAA0C,0DAA0D,EAAE;;AAEvJ,iDAAiD,aAAa,uFAAuF,EAAE,uFAAuF;;AAE9O,0CAA0C,+DAA+D,qGAAqG,EAAE,yEAAyE,eAAe,yEAAyE,EAAE,EAAE,uHAAuH;;AAE5e;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,8DAA8D;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;;AAEA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,6DAA6D;AAC7D;AACA;AACA,4CAA4C;AAC5C,OAAO;AACP;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,kBAAkB,oBAAoB;AACtC,6CAA6C;AAC7C;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA,oC;;;;;;;;;;;;;AClIA;;AAEA;AACA;AACA,CAAC;;AAED;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,sCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK,2BAA2B;AAChC,0CAA0C,+IAAyH;AACnK;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,0B;;;;;;;;;;;;ACzCA,gF","file":"expressionAtlasBioentityInformation.bundle.js","sourcesContent":["import {render} from 'sc-atlas-bioentity-information'\n\nexport {render}\n\n\n\n// WEBPACK FOOTER //\n// ./atlas_bundles/bioentity-information/index.js","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.render = exports.default = undefined;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = require('react-dom');\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _BioentityInformation = require('./BioentityInformation.js');\n\nvar _BioentityInformation2 = _interopRequireDefault(_BioentityInformation);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar render = function render(options, target) {\n    _reactDom2.default.render(_react2.default.createElement(_BioentityInformation2.default, options), document.getElementById(target));\n};\n\nexports.default = _BioentityInformation2.default;\nexports.render = render;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./atlas_bundles/bioentity-information/node_modules/sc-atlas-bioentity-information/lib/index.js\n// module id = 1186\n// module chunks = 4","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _urijs = require('urijs');\n\nvar _urijs2 = _interopRequireDefault(_urijs);\n\nvar _BioentityProperty = require('./BioentityProperty');\n\nvar _BioentityProperty2 = _interopRequireDefault(_BioentityProperty);\n\nvar _Loading = require('./Loading');\n\nvar _Loading2 = _interopRequireDefault(_Loading);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nvar fetchResponseJson = function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(base, endpoint) {\n    var response, responseJson;\n    return regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return fetch((0, _urijs2.default)(endpoint, base).toString());\n\n          case 2:\n            response = _context.sent;\n            _context.next = 5;\n            return response.json();\n\n          case 5:\n            responseJson = _context.sent;\n            return _context.abrupt('return', responseJson);\n\n          case 7:\n          case 'end':\n            return _context.stop();\n        }\n      }\n    }, _callee, undefined);\n  }));\n\n  return function fetchResponseJson(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar BioentityInformation = function (_React$Component) {\n  _inherits(BioentityInformation, _React$Component);\n\n  function BioentityInformation(props) {\n    _classCallCheck(this, BioentityInformation);\n\n    var _this = _possibleConstructorReturn(this, (BioentityInformation.__proto__ || Object.getPrototypeOf(BioentityInformation)).call(this, props));\n\n    _this.state = {\n      bioentityProperties: [],\n      errorMessage: null,\n      loading: false\n    };\n    return _this;\n  }\n\n  _createClass(BioentityInformation, [{\n    key: '_fetchAndSetState',\n    value: function _fetchAndSetState(_ref2) {\n      var _this2 = this;\n\n      var atlasUrl = _ref2.atlasUrl,\n          geneId = _ref2.geneId;\n\n      var atlasEndpoint = 'json/bioentity_information/' + geneId;\n\n      return fetchResponseJson(atlasUrl, atlasEndpoint).then(function (responseJson) {\n        _this2.setState({\n          bioentityProperties: responseJson,\n          errorMessage: null,\n          loading: false\n        });\n      }).catch(function (reason) {\n        _this2.setState({\n          errorMessage: reason.name + ': ' + reason.message\n        });\n      });\n    }\n  }, {\n    key: 'componentDidCatch',\n    value: function componentDidCatch(error, errorMessage) {\n      this.setState({\n        errorMessage: '' + error\n      });\n    }\n  }, {\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this.setState({\n        loading: true\n      });\n      return this._fetchAndSetState(this.props);\n    }\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      if (nextProps.atlasUrl !== this.props.atlasUrl || nextProps.geneId !== this.props.geneId) {\n        this.setState({\n          bioentityProperties: [],\n          loading: true\n        });\n        return this._fetchAndSetState(nextProps);\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var bioentityProperties = this.state.bioentityProperties.map(function (property) {\n        return _react2.default.createElement(\n          'tr',\n          { key: property.type },\n          _react2.default.createElement(\n            'th',\n            { style: { whiteSpace: 'nowrap' } },\n            property.name\n          ),\n          _react2.default.createElement(\n            'td',\n            null,\n            _react2.default.createElement(_BioentityProperty2.default, { type: property.type, values: property.values })\n          )\n        );\n      });\n\n      return this.props.geneId && _react2.default.createElement(\n        'div',\n        { className: this.props.wrapperClassName },\n        _react2.default.createElement(_Loading2.default, { loading: this.state.loading, resourcesUrl: this.props.resourcesUrl }),\n        _react2.default.createElement(\n          'table',\n          { className: 'hover' },\n          _react2.default.createElement(\n            'tbody',\n            null,\n            bioentityProperties\n          )\n        )\n      );\n    }\n  }]);\n\n  return BioentityInformation;\n}(_react2.default.Component);\n\nBioentityInformation.propTypes = {\n  atlasUrl: _propTypes2.default.string.isRequired,\n  geneId: _propTypes2.default.string,\n  resourcesUrl: _propTypes2.default.string,\n  wrapperClassName: _propTypes2.default.string\n};\n\nBioentityInformation.defaultProps = {\n  geneId: '',\n  wrapperClassName: 'row column expanded'\n};\n\nexports.default = BioentityInformation;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./atlas_bundles/bioentity-information/node_modules/sc-atlas-bioentity-information/lib/BioentityInformation.js\n// module id = 1187\n// module chunks = 4","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar PropertyValue = function PropertyValue(_ref) {\n  var hasUrl = _ref.hasUrl,\n      isLast = _ref.isLast,\n      text = _ref.text,\n      url = _ref.url;\n  return hasUrl ? _react2.default.createElement(\n    'span',\n    null,\n    _react2.default.createElement(\n      'a',\n      { className: \"bioEntityCardLink\", href: url, target: '_blank' },\n      text\n    ),\n    !isLast ? ', ' : ''\n  ) : _react2.default.createElement(\n    'span',\n    null,\n    text + (!isLast ? ', ' : '')\n  );\n};\n\nvar TOP_RELEVANT_VALUES = 3;\n\nvar BioentityProperty = function (_React$Component) {\n  _inherits(BioentityProperty, _React$Component);\n\n  function BioentityProperty(props) {\n    _classCallCheck(this, BioentityProperty);\n\n    var _this = _possibleConstructorReturn(this, (BioentityProperty.__proto__ || Object.getPrototypeOf(BioentityProperty)).call(this, props));\n\n    _this.state = {\n      showAll: false\n    };\n\n    _this.handleShowMoreClick = _this.handleClick.bind(_this);\n    return _this;\n  }\n\n  _createClass(BioentityProperty, [{\n    key: 'handleClick',\n    value: function handleClick() {\n      this.setState(function (previousState) {\n        return {\n          showAll: !previousState.showAll\n        };\n      });\n    }\n\n    // Return three most relevant links\n\n  }, {\n    key: '_getMostRelevant',\n    value: function _getMostRelevant(properties) {\n      // The properties are sorted in descending order by relevance in the backend\n      return properties.slice(0, TOP_RELEVANT_VALUES);\n    }\n  }, {\n    key: '_renderPropertyValues',\n    value: function _renderPropertyValues(values) {\n      return values.map(function (value, index) {\n        return _react2.default.createElement(PropertyValue, { key: value.text,\n          isLast: index >= values.length - 1,\n          hasUrl: !!value.url,\n          text: value.text, url: value.url });\n      });\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var numberOfHiddenLinks = this.props.values.length - TOP_RELEVANT_VALUES;\n      var hasOptionalLinks = [\"go\", \"po\"].indexOf(this.props.type) > -1 && numberOfHiddenLinks > 0;\n      var showMoreLessButton = _react2.default.createElement(\n        'a',\n        { key: 'showButton',\n          role: 'button',\n          style: { cursor: 'pointer' },\n          onClick: this.handleShowMoreClick },\n        this.state.showAll ? ' (show less)' : ' \\u2026 and ' + numberOfHiddenLinks + ' more'\n      );\n\n      var allValuesWithOptionalLinks = this._renderPropertyValues(this.props.values);\n      var topThreeValuesWithOptionalLinks = this._renderPropertyValues(this._getMostRelevant(this.props.values));\n\n      return _react2.default.createElement(\n        'div',\n        null,\n        !hasOptionalLinks && allValuesWithOptionalLinks,\n        hasOptionalLinks && !this.state.showAll && [topThreeValuesWithOptionalLinks, showMoreLessButton],\n        hasOptionalLinks && this.state.showAll && [allValuesWithOptionalLinks, showMoreLessButton]\n      );\n    }\n  }]);\n\n  return BioentityProperty;\n}(_react2.default.Component);\n\nBioentityProperty.propTypes = {\n  type: _propTypes2.default.string.isRequired,\n  values: _propTypes2.default.arrayOf(_propTypes2.default.shape({\n    text: _propTypes2.default.string.isRequired,\n    url: _propTypes2.default.string.isRequired,\n    relevance: _propTypes2.default.number.isRequired\n  }))\n};\n\nexports.default = BioentityProperty;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./atlas_bundles/bioentity-information/node_modules/sc-atlas-bioentity-information/lib/BioentityProperty.js\n// module id = 1188\n// module chunks = 4","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _urijs = require('urijs');\n\nvar _urijs2 = _interopRequireDefault(_urijs);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Loading = function Loading(props) {\n  if (!props.loading) {\n    return null;\n  }\n\n  return _react2.default.createElement(\n    'div',\n    { className: 'text-center' },\n    _react2.default.createElement('img', { className: 'small-centered', src: (0, _urijs2.default)(require('./images/loading.gif'), props.resourcesUrl).toString() })\n  );\n};\n\nLoading.propTypes = {\n  loading: _propTypes2.default.bool.isRequired,\n  resourcesUrl: _propTypes2.default.string\n};\n\nLoading.defaultProps = {\n  resourcesUrl: ''\n};\n\nexports.default = Loading;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./atlas_bundles/bioentity-information/node_modules/sc-atlas-bioentity-information/lib/Loading.js\n// module id = 1189\n// module chunks = 4","module.exports = __webpack_public_path__ + \"e5d9a446341dc8fd32fee7401aa8e252.gif\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./atlas_bundles/bioentity-information/node_modules/sc-atlas-bioentity-information/lib/images/loading.gif\n// module id = 1190\n// module chunks = 4"],"sourceRoot":""}